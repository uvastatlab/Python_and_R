<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Importing Data | Python and R</title>
  <meta name="description" content="This book provides parallel examples in Python and R to help users of one platform more easily transition to the other." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Importing Data | Python and R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book provides parallel examples in Python and R to help users of one platform more easily transition to the other." />
  <meta name="github-repo" content="uvastatlab/Python_and_R" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Importing Data | Python and R" />
  
  <meta name="twitter:description" content="This book provides parallel examples in Python and R to help users of one platform more easily transition to the other." />
  

<meta name="author" content="Clay Ford, Jacob Goldstein-Greenwood, Oyinkansola Adenekan, Samantha Lomuscio" />


<meta name="date" content="2021-10-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-structures.html"/>
<link rel="next" href="data-manipulation.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Python and R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="basics.html"><a href="basics.html"><i class="fa fa-check"></i><b>1</b> Basics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="basics.html"><a href="basics.html#math"><i class="fa fa-check"></i><b>1.1</b> Math</a></li>
<li class="chapter" data-level="1.2" data-path="basics.html"><a href="basics.html#assignment"><i class="fa fa-check"></i><b>1.2</b> Assignment</a></li>
<li class="chapter" data-level="1.3" data-path="basics.html"><a href="basics.html#printing-a-value"><i class="fa fa-check"></i><b>1.3</b> Printing a value</a></li>
<li class="chapter" data-level="1.4" data-path="basics.html"><a href="basics.html#packages"><i class="fa fa-check"></i><b>1.4</b> Packages</a></li>
<li class="chapter" data-level="1.5" data-path="basics.html"><a href="basics.html#logic"><i class="fa fa-check"></i><b>1.5</b> Logic</a></li>
<li class="chapter" data-level="1.6" data-path="basics.html"><a href="basics.html#generating-a-sequence-of-values"><i class="fa fa-check"></i><b>1.6</b> Generating a sequence of values</a></li>
<li class="chapter" data-level="1.7" data-path="basics.html"><a href="basics.html#calculating-means-and-medians"><i class="fa fa-check"></i><b>1.7</b> Calculating means and medians</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>2</b> Data Structures</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-structures.html"><a href="data-structures.html#one-dimensional-data"><i class="fa fa-check"></i><b>2.1</b> One-dimensional data</a></li>
<li class="chapter" data-level="2.2" data-path="data-structures.html"><a href="data-structures.html#two-dimensional-data"><i class="fa fa-check"></i><b>2.2</b> Two-dimensional data</a></li>
<li class="chapter" data-level="2.3" data-path="data-structures.html"><a href="data-structures.html#three-dimensional-and-higher-data"><i class="fa fa-check"></i><b>2.3</b> Three-dimensional and higher data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>3</b> Importing Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="importing-data.html"><a href="importing-data.html#csv"><i class="fa fa-check"></i><b>3.1</b> CSV</a></li>
<li class="chapter" data-level="3.2" data-path="importing-data.html"><a href="importing-data.html#xlsxlsx-excel"><i class="fa fa-check"></i><b>3.2</b> XLS/XLSX (Excel)</a></li>
<li class="chapter" data-level="3.3" data-path="importing-data.html"><a href="importing-data.html#json"><i class="fa fa-check"></i><b>3.3</b> JSON</a></li>
<li class="chapter" data-level="3.4" data-path="importing-data.html"><a href="importing-data.html#xml"><i class="fa fa-check"></i><b>3.4</b> XML</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-manipulation.html"><a href="data-manipulation.html"><i class="fa fa-check"></i><b>4</b> Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-manipulation.html"><a href="data-manipulation.html#names-of-variables-and-their-types"><i class="fa fa-check"></i><b>4.1</b> Names of variables and their types</a></li>
<li class="chapter" data-level="4.2" data-path="data-manipulation.html"><a href="data-manipulation.html#access-variables"><i class="fa fa-check"></i><b>4.2</b> Access variables</a></li>
<li class="chapter" data-level="4.3" data-path="data-manipulation.html"><a href="data-manipulation.html#rename-variables"><i class="fa fa-check"></i><b>4.3</b> Rename variables</a></li>
<li class="chapter" data-level="4.4" data-path="data-manipulation.html"><a href="data-manipulation.html#create-replace-and-remove-variables"><i class="fa fa-check"></i><b>4.4</b> Create, replace and remove variables</a></li>
<li class="chapter" data-level="4.5" data-path="data-manipulation.html"><a href="data-manipulation.html#create-strings-from-numbers"><i class="fa fa-check"></i><b>4.5</b> Create strings from numbers</a></li>
<li class="chapter" data-level="4.6" data-path="data-manipulation.html"><a href="data-manipulation.html#create-numbers-from-strings"><i class="fa fa-check"></i><b>4.6</b> Create numbers from strings</a></li>
<li class="chapter" data-level="4.7" data-path="data-manipulation.html"><a href="data-manipulation.html#change-case"><i class="fa fa-check"></i><b>4.7</b> Change case</a></li>
<li class="chapter" data-level="4.8" data-path="data-manipulation.html"><a href="data-manipulation.html#drop-duplicate-rows"><i class="fa fa-check"></i><b>4.8</b> Drop duplicate rows</a></li>
<li class="chapter" data-level="4.9" data-path="data-manipulation.html"><a href="data-manipulation.html#randomly-sample-rows"><i class="fa fa-check"></i><b>4.9</b> Randomly sample rows</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html"><i class="fa fa-check"></i><b>5</b> Combine, Reshape and Merge</a>
<ul>
<li class="chapter" data-level="5.1" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html#combine-rows"><i class="fa fa-check"></i><b>5.1</b> Combine rows</a></li>
<li class="chapter" data-level="5.2" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html#combine-columns"><i class="fa fa-check"></i><b>5.2</b> Combine columns</a></li>
<li class="chapter" data-level="5.3" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html#reshaping-data"><i class="fa fa-check"></i><b>5.3</b> Reshaping data</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html#wide-to-long"><i class="fa fa-check"></i><b>5.3.1</b> Wide to long</a></li>
<li class="chapter" data-level="5.3.2" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html#long-to-wide"><i class="fa fa-check"></i><b>5.3.2</b> Long to wide</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html#mergejoin"><i class="fa fa-check"></i><b>5.4</b> Merge/Join</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html#left-join"><i class="fa fa-check"></i><b>5.4.1</b> Left Join</a></li>
<li class="chapter" data-level="5.4.2" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html#right-join"><i class="fa fa-check"></i><b>5.4.2</b> Right Join</a></li>
<li class="chapter" data-level="5.4.3" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html#inner-join"><i class="fa fa-check"></i><b>5.4.3</b> Inner Join</a></li>
<li class="chapter" data-level="5.4.4" data-path="combine-reshape-and-merge.html"><a href="combine-reshape-and-merge.html#outer-join"><i class="fa fa-check"></i><b>5.4.4</b> Outer Join</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Python and R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="importing-data" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Importing Data</h1>
<p>This chapter reviews importing external data into Python and R, including CSV, Excel, and other structured data files. There is often more than one way to import data into Python and R. The examples below highlight one way that we frequently see used.</p>
<p>The data we use for demonstration is New York State Math Test Results by Grade from 2006 - 2011, downloaded from <a href="https://catalog.data.gov/dataset/2006-2011-nys-math-test-results-by-grade-citywide-by-race-ethnicity">data.gov</a> on September 30, 2021.</p>
<div id="csv" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> CSV</h2>
<p>Comma separated value (CSV) files are text files with fields separated by commas. They are useful for “rectangular” data where rows represent observations and columns represent variables or features.</p>
<div id="python-10" class="section level4 unnumbered">
<h4>Python</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="importing-data.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> <span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb23-2"><a href="importing-data.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> d <span class="op">=</span> pd.read_csv(<span class="st">&#39;data/ny_math_test.csv&#39;</span>)</span>
<span id="cb23-3"><a href="importing-data.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> d.loc[<span class="dv">0</span>:<span class="dv">2</span>, [<span class="st">&quot;Grade&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Mean Scale Score&quot;</span>]]</span>
<span id="cb23-4"><a href="importing-data.html#cb23-4" aria-hidden="true" tabindex="-1"></a>  Grade  Year  Mean Scale Score</span>
<span id="cb23-5"><a href="importing-data.html#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>     <span class="dv">3</span>  <span class="dv">2006</span>               <span class="dv">700</span></span>
<span id="cb23-6"><a href="importing-data.html#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">4</span>  <span class="dv">2006</span>               <span class="dv">699</span></span>
<span id="cb23-7"><a href="importing-data.html#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">5</span>  <span class="dv">2006</span>               <span class="dv">691</span></span></code></pre></div>
</div>
<div id="r-10" class="section level4 unnumbered">
<h4>R</h4>
<p>There are many ways to import a csv file. A common way is to use the base R function <code>read.csv()</code>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="importing-data.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/ny_math_test.csv&quot;</span>)</span>
<span id="cb24-2"><a href="importing-data.html#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">c</span>(<span class="st">&quot;Grade&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Mean.Scale.Score&quot;</span>)]</span>
<span id="cb24-3"><a href="importing-data.html#cb24-3" aria-hidden="true" tabindex="-1"></a>  Grade Year Mean.Scale.Score</span>
<span id="cb24-4"><a href="importing-data.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">3</span> <span class="dv">2006</span>              <span class="dv">700</span></span>
<span id="cb24-5"><a href="importing-data.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">4</span> <span class="dv">2006</span>              <span class="dv">699</span></span>
<span id="cb24-6"><a href="importing-data.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">5</span> <span class="dv">2006</span>              <span class="dv">691</span></span></code></pre></div>
<p>Notice the spaces in the column names have been replaced with periods.</p>
<p>Two packages that provide alternatives to <code>read.csv()</code> are <strong>readr</strong> and <strong>data.table</strong>. The <strong>readr</strong> function <code>read_csv()</code> returns a <a href="https://r4ds.had.co.nz/tibbles.html">tibble</a>. The <strong>data.table</strong> function <code>fread()</code> returns a <a href="https://rdatatable.gitlab.io/data.table/articles/datatable-intro.html">data.table</a>.</p>
</div>
</div>
<div id="xlsxlsx-excel" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> XLS/XLSX (Excel)</h2>
<p>Excel files are native to Microsoft Excel. Prior to 2007, Excel files had an extension of XLS. With the launch of Excel 2007, the extension was changed to XLSX. Excel files can have multiple sheets of data. This needs to be accounted for when importing into Python and R.</p>
<div id="python-11" class="section level4 unnumbered">
<h4>Python</h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="importing-data.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> <span class="im">import</span> pandas <span class="im">as</span> pd  </span>
<span id="cb25-2"><a href="importing-data.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> d <span class="op">=</span> pd.read_excel(<span class="st">&#39;data/ny_math_test.xlsx&#39;</span>)  </span>
<span id="cb25-3"><a href="importing-data.html#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> d.loc[<span class="dv">0</span>:<span class="dv">2</span>, [<span class="st">&quot;Grade&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Mean Scale Score&quot;</span>]]  </span></code></pre></div>
</div>
<div id="r-11" class="section level4 unnumbered">
<h4>R</h4>
<p><strong>readxl</strong> is a well-documented and actively maintained package for importing Excel files into R. The workhorse function is <code>read_excel()</code>. The <code>sheet</code> argument allows you to specify which sheet you want to import. You can specify sheet by its ordering or by its name. Since this Excel file only has one sheet we do not need to use the argument.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="importing-data.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(readxl)</span>
<span id="cb26-2"><a href="importing-data.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d_xls <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;data/ny_math_test.xlsx&quot;</span>)</span>
<span id="cb26-3"><a href="importing-data.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d_xls[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">c</span>(<span class="st">&quot;Grade&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Mean Scale Score&quot;</span>)]</span>
<span id="cb26-4"><a href="importing-data.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 3</span></span>
<span id="cb26-5"><a href="importing-data.html#cb26-5" aria-hidden="true" tabindex="-1"></a>  Grade  Year <span class="st">`</span><span class="at">Mean Scale Score</span><span class="st">`</span></span>
<span id="cb26-6"><a href="importing-data.html#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>              <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb26-7"><a href="importing-data.html#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">3</span>      <span class="dv">2006</span>                <span class="dv">700</span></span>
<span id="cb26-8"><a href="importing-data.html#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">4</span>      <span class="dv">2006</span>                <span class="dv">699</span></span>
<span id="cb26-9"><a href="importing-data.html#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">5</span>      <span class="dv">2006</span>                <span class="dv">691</span></span></code></pre></div>
<p>The result is a <em>tibble</em>, a <a href="https://tibble.tidyverse.org/">tidyverse data frame</a>.</p>
<p>It’s worth noting we can use the <code>range</code> argument to specify a range of cells to import. For example, if the top left corner of the data was B5 and the bottom right corner of the data was J54, we could enter <code>range="B5:J54"</code> to just import that section of data.</p>
</div>
</div>
<div id="json" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> JSON</h2>
<p>JSON (<strong>J</strong>ava<strong>S</strong>cript <strong>O</strong>bject <strong>N</strong>otation) is a flexible format for storing data. JSON files are text and can be viewed in any text editor. Because of their flexibility JSON files can be quite complex in the way they store data. Therefore there is no one-size-fits-all method for importing JSON files into Python or R.</p>
<div id="python-12" class="section level4 unnumbered">
<h4>Python</h4>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="importing-data.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> <span class="im">import</span> json</span>
<span id="cb27-2"><a href="importing-data.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> <span class="co"># load data using Python JSON module</span></span>
<span id="cb27-3"><a href="importing-data.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> <span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;data/ny_math_test.json&#39;</span>,<span class="st">&#39;r&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb27-4"><a href="importing-data.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="op">+</span>     data <span class="op">=</span> json.loads(f.read())</span>
<span id="cb27-5"><a href="importing-data.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> </span>
<span id="cb27-6"><a href="importing-data.html#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> <span class="im">import</span> pandas <span class="im">as</span> pd  </span>
<span id="cb27-7"><a href="importing-data.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> d_json <span class="op">=</span> pd.json_normalize(data, record_path <span class="op">=</span>[<span class="st">&#39;data&#39;</span>])</span>
<span id="cb27-8"><a href="importing-data.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> </span>
<span id="cb27-9"><a href="importing-data.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> <span class="co"># add column names</span></span>
<span id="cb27-10"><a href="importing-data.html#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> names <span class="op">=</span> <span class="bu">list</span>()</span>
<span id="cb27-11"><a href="importing-data.html#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">23</span>): </span>
<span id="cb27-12"><a href="importing-data.html#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="op">+</span>   names.append(data[<span class="st">&#39;meta&#39;</span>][<span class="st">&#39;view&#39;</span>][<span class="st">&#39;columns&#39;</span>][i][<span class="st">&#39;name&#39;</span>])</span>
<span id="cb27-13"><a href="importing-data.html#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> d_json.columns <span class="op">=</span> names</span>
<span id="cb27-14"><a href="importing-data.html#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> </span>
<span id="cb27-15"><a href="importing-data.html#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="op">+</span> d_json.loc[<span class="dv">0</span>:<span class="dv">2</span>, [<span class="st">&quot;Grade&quot;</span>, <span class="st">&quot;Year&quot;</span>, <span class="st">&quot;Mean Scale Score&quot;</span>]]  </span>
<span id="cb27-16"><a href="importing-data.html#cb27-16" aria-hidden="true" tabindex="-1"></a>  Grade  Year Mean Scale Score</span>
<span id="cb27-17"><a href="importing-data.html#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span>     <span class="dv">3</span>  <span class="dv">2006</span>              <span class="dv">700</span></span>
<span id="cb27-18"><a href="importing-data.html#cb27-18" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">4</span>  <span class="dv">2006</span>              <span class="dv">699</span></span>
<span id="cb27-19"><a href="importing-data.html#cb27-19" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">5</span>  <span class="dv">2006</span>              <span class="dv">691</span></span></code></pre></div>
</div>
<div id="r-12" class="section level4 unnumbered">
<h4>R</h4>
<p><strong>jsonlite</strong> is one of several R packages available for importing JSON files into R. The <code>read_json()</code> function takes a JSON file and returns a list or data frame depending on the structure of the data file and its arguments. We set <code>simplifyVector = TRUE</code> so the data is simplified into a matrix.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="importing-data.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(jsonlite)</span>
<span id="cb28-2"><a href="importing-data.html#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d_json <span class="ot">&lt;-</span> <span class="fu">read_json</span>(<span class="st">&#39;data/ny_math_test.json&#39;</span>, <span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>The <code>d_json</code> object is a list with two elements: “meta” and “data.” The “data” element is a matrix that contains the data of interest. The “meta” element contains the column names for the data (among much else). Notice we had to “drill down” in the list to find the column names. We assign column names to the matrix using the <code>colnames()</code> function and then convert the matrix to a data frame using the <code>as.data.frame()</code> function.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="importing-data.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">colnames</span>(d_json<span class="sc">$</span>data) <span class="ot">&lt;-</span> d_json<span class="sc">$</span>meta<span class="sc">$</span>view<span class="sc">$</span>columns<span class="sc">$</span>fieldName</span>
<span id="cb29-2"><a href="importing-data.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d_json <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(d_json<span class="sc">$</span>data)</span>
<span id="cb29-3"><a href="importing-data.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d_json[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="fu">c</span>(<span class="st">&quot;grade&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;mean_scale_score&quot;</span>)]</span>
<span id="cb29-4"><a href="importing-data.html#cb29-4" aria-hidden="true" tabindex="-1"></a>  grade year mean_scale_score</span>
<span id="cb29-5"><a href="importing-data.html#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>     <span class="dv">3</span> <span class="dv">2006</span>              <span class="dv">700</span></span>
<span id="cb29-6"><a href="importing-data.html#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>     <span class="dv">4</span> <span class="dv">2006</span>              <span class="dv">699</span></span>
<span id="cb29-7"><a href="importing-data.html#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>     <span class="dv">5</span> <span class="dv">2006</span>              <span class="dv">691</span></span></code></pre></div>
</div>
</div>
<div id="xml" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> XML</h2>
<p>XML (e<strong>X</strong>tensible <strong>M</strong>arkup <strong>L</strong>anguage) is a markup language that was designed to store data. XML files are text and can be viewed in any text editor or a web browser. Because of their flexibility XML files can be quite complex in the way they store data. Therefore there is no one-size-fits-all for importing XML files into Python or R.</p>
<div id="python-13" class="section level4 unnumbered">
<h4>Python</h4>
</div>
<div id="r-13" class="section level4 unnumbered">
<h4>R</h4>
<p><strong>xml2</strong> is a relatively small but powerful package for importing and working with XML files. The <code>read_xml()</code> function imports an XML file and returns a list of <em>pointers</em> to XML <em>nodes</em>. There are a number of ways to proceed once you import an XML file, such as using the <code>xml_find_all()</code> function to find nodes that match an <a href="https://www.w3schools.com/xml/xpath_intro.asp">xpath</a> expression. Below we take a simple approach and convert the XML nodes into a list using the <code>as_list()</code> function that is part of the <strong>xml2</strong> package. Once we have the XML nodes in a list, we can use the <code>bind_rows()</code> function in the <strong>dplyr</strong> package to create a data frame. Notice we have to drill down into the list to select the element that contains the data. After this we need to do one more thing: <em>unlist</em> each the columns into vectors. We do this by applying the <code>unlist</code> function to each column of <code>d</code>. We save the result by assigning to <code>d[]</code>, which overwrites each element (or column) of <code>d</code> with the unlisted result.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="importing-data.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(xml2)</span>
<span id="cb30-2"><a href="importing-data.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d_xml <span class="ot">&lt;-</span> <span class="fu">read_xml</span>(<span class="st">&#39;data/ny_math_test.xml&#39;</span>)</span>
<span id="cb30-3"><a href="importing-data.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d_list <span class="ot">&lt;-</span> <span class="fu">as_list</span>(d_xml)</span>
<span id="cb30-4"><a href="importing-data.html#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(d_list<span class="sc">$</span>response<span class="sc">$</span>row)</span>
<span id="cb30-5"><a href="importing-data.html#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d[] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(d, unlist)</span>
<span id="cb30-6"><a href="importing-data.html#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> d[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="fu">c</span>(<span class="st">&quot;grade&quot;</span>, <span class="st">&quot;year&quot;</span>, <span class="st">&quot;mean_scale_score&quot;</span>)]</span>
<span id="cb30-7"><a href="importing-data.html#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 3 × 3</span></span>
<span id="cb30-8"><a href="importing-data.html#cb30-8" aria-hidden="true" tabindex="-1"></a>  grade year  mean_scale_score</span>
<span id="cb30-9"><a href="importing-data.html#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span> <span class="er">&lt;</span>chr<span class="sc">&gt;</span>           </span>
<span id="cb30-10"><a href="importing-data.html#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">3</span>     <span class="dv">2006</span>  <span class="dv">700</span>             </span>
<span id="cb30-11"><a href="importing-data.html#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">4</span>     <span class="dv">2006</span>  <span class="dv">699</span>             </span>
<span id="cb30-12"><a href="importing-data.html#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">5</span>     <span class="dv">2006</span>  <span class="dv">691</span>             </span></code></pre></div>
<p>The result is a <em>tibble</em>, a <a href="https://tibble.tidyverse.org/">tidyverse data frame</a>. We would most likely want to proceed to converting certain columns to numeric.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-structures.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-manipulation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/uvastatlab/Python_and_R/edit/main/03-import.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
